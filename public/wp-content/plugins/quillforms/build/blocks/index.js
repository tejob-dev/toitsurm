!function(){"use strict";var e={d:function(t,r){for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{getBlockType:function(){return w},registerBlockType:function(){return F},sanitizeBlockAttributes:function(){return v},sanitizeBlocks:function(){return _},setBlockAdminSettings:function(){return T},setBlockRendererSettings:function(){return B},store:function(){return h}});var r={};e.r(r),e.d(r,{addBlockTypes:function(){return d},setBlockAdminSettings:function(){return p},setBlockRendererSettings:function(){return u}});var o={};e.r(o),e.d(o,{getBlockSupport:function(){return g},getBlockType:function(){return f},getBlockTypes:function(){return y},hasBlockSupport:function(){return m}});var n=window.wp.data,i=window.lodash;const s="SET_BLOCK_RENDERER_SETTINGS",c="SET_BLOCK_ADMIN_SETTINGS",l="ADD_BLOCK_TYPES",a={unknown:{title:"Unknown",supports:{editable:!0,description:!0,attachment:!0,required:!1,logic:!0},logicalOperators:["is","is_not","starts_with","greater_than","lower_than","ends_with","contains","not_contains"]}};const u=(e,t)=>({type:s,settings:e,name:t}),p=(e,t)=>({type:c,settings:e,name:t}),d=e=>({type:l,blockTypes:(0,i.castArray)(e)}),y=e=>(0,i.reduce)((0,i.sortBy)((0,i.keys)(e),(t=>e[t].order)),((t,r)=>("unknown"!==r&&(t[r]=e[r]),t)),{});function f(e,t){return e[t]}const g=(e,t,r)=>{const o=((e,t)=>"string"==typeof t?f(e,t):t)(e,t);return(0,i.get)(o,["supports",r])};function m(e,t,r){return!!g(e,t,r)}const b=(0,n.createReduxStore)("quillForms/blocks",{actions:r,selectors:o,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:case s:const{name:r}=t;return e[r]?{...e,[r]:{...e[r],...t.settings}}:e;case l:return{...e,...(0,i.keyBy)(t.blockTypes,"name")}}return e}});var h=b;(0,n.register)(b);var k=window.qf.utils;const T=(e,t)=>{t={title:"Untitled",color:"#333s",icon:"plus",order:20,controls:()=>null,...t},"string"==typeof e?(0,n.select)("quillForms/blocks").getBlockType(e)?("string"!=typeof t.color&&console.error('The "color" property must be a valid string!'),t.icon=(0,k.normalizeIconObject)(t.icon),(0,k.isValidIcon)(t.icon.src)?!t.logicControl||(0,i.isFunction)(t.logicControl)?!t.entryDetails||(0,i.isFunction)(t.entryDetails)?(0,i.isFunction)(t.controls)?t.order&&isNaN(t.order)?console.error('The "order" property must be a valid number!'):((0,i.isFunction)(t.getChoices)||(t.getChoices=e=>{let{id:t,attributes:r}=e;return[]}),(0,n.dispatch)("quillForms/blocks").setBlockAdminSettings((0,i.pick)(t,["controls","entryDetails","logicControl","color","icon","title","order","getChoices"]),e)):console.error('The "controls" property must be a valid function!'):console.error('The "entryDetails" property must be a valid function!'):console.error('The "logicControl" property must be a valid function!'):console.error('The "icon" property must be a valid function!')):console.error(`The ${e} block isn't registered. Please register it first!`):console.error("Block types must be strings.")},B=(e,t)=>{if(t={display:()=>null,...t},"string"==typeof e)if((0,n.select)("quillForms/blocks").getBlockType(e))if((0,i.isFunction)(t.display))if(!t.mergeTag||(0,i.isFunction)(t.mergeTag))if(!t.counterIcon||(0,i.isFunction)(t.counterIcon))if(!t.nextBtn||(0,i.isFunction)(t.nextBtn))if(!t.isConditionFulfilled||(0,i.isFunction)(t.isConditionFulfilled)){if(t.isConditionFulfilled||(t.isConditionFulfilled=(e,t,r)=>{switch(e){case"is":return Array.isArray(r)?r.includes(t):r==t;case"is_not":return Array.isArray(r)?!r.includes(t):r!=t;case"greater_than":return!isNaN(r)&&!isNaN(t)&&parseFloat(r)>parseFloat(t);case"lower_than":return!isNaN(r)&&!isNaN(t)&&parseFloat(r)<parseFloat(t);case"contains":return"string"==typeof r&&"string"==typeof t&&-1!==r.indexOf(t);case"not_contains":return"string"==typeof r&&"string"==typeof t&&-1===r.indexOf(t);case"starts_with":return"string"==typeof r&&"string"==typeof t&&r.startsWith(t);case"ends_with":return"string"==typeof r&&"string"==typeof t&&r.endsWith(t)}return!1}),!t.getNumericVal||(0,i.isFunction)(t.getNumericVal))return t.getNumericVal||(t.getNumericVal=(e,t)=>parseFloat(e)),(0,n.dispatch)("quillForms/blocks").setBlockRendererSettings((0,i.pick)(t,["display","mergeTag","nextBtn","counterIcon","isConditionFulfilled","getNumericVal","displayLayout"]),e),t;console.error('The "getNumericVal" must be a function')}else console.error('The "isConditionFulfilled" property must be a valid function!');else console.error('The "nextBtn" property must be a valid function!');else console.error('The "counterIcon" property must be a valid function!');else console.error('The "mergeTag" property must be a valid function!');else console.error('The "display" property must be a valid function!');else console.error(`The ${e} block isn't registered. Please register it first!`);else console.error("Block types must be strings.")},F=(e,t)=>{if("string"!=typeof e)return void console.error("Block names must be strings.");if((0,n.select)("quillForms/blocks").getBlockType(e))return void console.error('Block "'+e+'" is already registered.');t.supports={editable:!0,required:!0,attachment:!0,description:!0,logic:!0,logicConditions:!0,numeric:!1,choices:!1,payments:!1,points:!1,...t.supports};let{attributes:r}=t;const{supports:o}=t;return r&&(0,i.isPlainObject)(r)||(r={}),o.required&&(r.required={type:"boolean",default:!1}),o.attachment&&(r.attachment={type:"object",properties:{url:{type:"string"}}}),o.description&&(r.description={type:"string",default:""}),o.theme&&(r.themeId={type:"number"}),r.label={type:"string",default:""},r.customHTML={type:"string",default:""},r.layout={type:"string",default:"stack"},r.attachmentFocalPoint={type:"object",default:{x:.5,y:.5}},r.attachmentFancyBorderRadius={type:"boolean",default:!1},r.attachmentBorderRadius={type:"boolean",default:"0px"},r.attachmentMaxWidth={type:"string",default:"none"},t.attributes=r,(0,n.dispatch)("quillForms/blocks").addBlockTypes({name:e,...(0,i.pick)(t,["attributes","supports","logicalOperators"])}),B(e,t),T(e,t),t};function w(e){return(0,n.select)("quillForms/blocks").getBlockType(e)}function v(e,t){const r=w(e);if(void 0===r)throw new Error(`Block type '${e}' is not registered.`);return(0,i.reduce)(r.attributes,((e,r,o)=>{const n=t[o];return void 0!==n?e[o]=n:r.hasOwnProperty("default")&&(e[o]=r.default),e}),{})}const _=e=>(0,i.isEmpty)(e)?[]:(0,i.map)(e,(e=>w(e.name)?{...e,attributes:v(e.name,e.attributes?e.attributes:{})}:{...e,name:"unknown",attributes:v("unknown",e.attributes?e.attributes:{})}));(window.qf=window.qf||{}).blocks=t}();
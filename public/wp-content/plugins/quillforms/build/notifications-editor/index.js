!function(){var e={4184:function(e,t){var n;!function(){"use strict";var i={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var r=o.apply(null,n);r&&e.push(r)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)i.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},2703:function(e,t,n){"use strict";var i=n(414);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,r){if(r!==i){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},5697:function(e,t,n){e.exports=n(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},28:function(e,t,n){"use strict";var i,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t._1=function(e){document.body.classList.add("react-confirm-alert-body-element"),function(){if(!document.getElementById("react-confirm-alert-firm-svg")){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"feGaussianBlur");t.setAttribute("stdDeviation","0.3");var n=document.createElementNS(e,"filter");n.setAttribute("id","gaussian-blur"),n.appendChild(t);var i=document.createElementNS(e,"svg");i.setAttribute("id","react-confirm-alert-firm-svg"),i.setAttribute("class","react-confirm-alert-svg"),i.appendChild(n),document.body.appendChild(i)}}(),function(e){var t=document.getElementById("react-confirm-alert");t||(document.body.children[0].classList.add("react-confirm-alert-blur"),(t=document.createElement("div")).id="react-confirm-alert",document.body.appendChild(t)),(0,c.render)(l.default.createElement(m,e),t)}(e)};var r=n(9196),l=u(r),s=u(n(5697)),c=n(1850);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=(o=i=function(e){function t(){var e,n,i;d(this,t);for(var o=arguments.length,a=Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=i=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.handleClickButton=function(e){e.onClick&&e.onClick(),i.close()},i.handleClickOverlay=function(e){var t=i.props,n=t.closeOnClickOutside,o=t.onClickOutside,a=e.target===i.overlay;n&&a&&(o(),i.close())},i.close=function(){var e=i.props.afterClose;g(),v(),p(e)},i.keyboardClose=function(e){var t=i.props,n=t.closeOnEscape,o=t.onKeypressEscape,a=t.keyCodeForClose,r=e.keyCode,l=27===r;a.includes(r)&&i.close(),n&&l&&(o(e),i.close())},i.componentDidMount=function(){document.addEventListener("keydown",i.keyboardClose,!1)},i.componentWillUnmount=function(){document.removeEventListener("keydown",i.keyboardClose,!1),i.props.willUnmount()},i.renderCustomUI=function(){var e=i.props,t=e.title,n=e.message,o=e.buttons;return(0,e.customUI)({title:t,message:n,buttons:o,onClose:i.close})},f(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,i=t.message,o=t.buttons,a=t.childrenElement,r=t.customUI,s=t.overlayClassName;return l.default.createElement("div",{className:"react-confirm-alert-overlay "+s,ref:function(t){return e.overlay=t},onClick:this.handleClickOverlay},l.default.createElement("div",{className:"react-confirm-alert"},r?this.renderCustomUI():l.default.createElement("div",{className:"react-confirm-alert-body"},n&&l.default.createElement("h1",null,n),i,a(),l.default.createElement("div",{className:"react-confirm-alert-button-group"},o.map((function(t,n){return l.default.createElement("button",{key:n,onClick:function(){return e.handleClickButton(t)},className:t.className},t.label)}))))))}}]),t}(r.Component),i.propTypes={title:s.default.string,message:s.default.string,buttons:s.default.array.isRequired,childrenElement:s.default.func,customUI:s.default.func,closeOnClickOutside:s.default.bool,closeOnEscape:s.default.bool,keyCodeForClose:s.default.arrayOf(s.default.number),willUnmount:s.default.func,afterClose:s.default.func,onClickOutside:s.default.func,onKeypressEscape:s.default.func,overlayClassName:s.default.string},i.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},o);function p(e){var t=document.getElementById("react-confirm-alert-firm-svg");t&&t.parentNode.removeChild(t),document.body.children[0].classList.remove("react-confirm-alert-blur"),e()}function v(){var e=document.getElementById("react-confirm-alert");e&&((0,c.unmountComponentAtNode)(e),e.parentNode.removeChild(e))}function g(){document.body.classList.remove("react-confirm-alert-body-element")}},4273:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function __(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(9196),r=n(2281),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={focused:!1,emails:[],inputValue:""},n.findEmailAddress=function(e,t){var i=n.props.validateEmail,o=[],a="",l=/[ ,;]/g,s=i||r.default,c=function(e){for(var t=n.state.emails,i=0,a=t.length;i<a;i++)if(t[i]===e)return!1;return o.push(e),!0};if(""!==e)if(l.test(e)){var u=e.split(l).filter((function(e){return""!==e&&null!=e}));do{s(""+u[0])?c(""+u.shift()):1===u.length?a=""+u.shift():u.shift()}while(u.length)}else t&&s(e)?c(e):a=e;n.setState({emails:n.state.emails.concat(o),inputValue:a}),o.length&&n.props.onChange&&n.props.onChange(n.state.emails.concat(o))},n.onChangeInputValue=function(e){n.findEmailAddress(e)},n.removeEmail=function(e){n.setState((function(t){return{emails:t.emails.slice(0,e).concat(t.emails.slice(e+1))}}),(function(){n.props.onChange&&n.props.onChange(n.state.emails)}))},n.handleOnKeydown=function(e){switch(e.which){case 13:case 9:e.preventDefault();break;case 8:e.currentTarget.value||n.removeEmail(n.state.emails.length-1)}},n.handleOnKeyup=function(e){switch(e.which){case 13:case 9:n.findEmailAddress(e.currentTarget.value,!0)}},n.handleOnChange=function(e){return n.onChangeInputValue(e.currentTarget.value)},n.handleOnBlur=function(e){n.setState({focused:!1}),n.findEmailAddress(e.currentTarget.value,!0)},n.handleOnFocus=function(){return n.setState({focused:!0})},n.emailInputRef=a.createRef(),n}return o(t,e),t.getDerivedStateFromProps=function(e,t){return t.propsEmails!==e.emails?{propsEmails:e.emails||[],emails:e.emails||[],inputValue:"",focused:!1}:null},t.prototype.render=function(){var e=this,t=this.state,n=t.focused,i=t.emails,o=t.inputValue,r=this.props,l=r.style,s=r.getLabel,c=r.className,u=void 0===c?"":c,d=r.noClass,f=r.placeholder;return a.createElement("div",{className:u+" "+(d?"":"react-multi-email")+" "+(n?"focused":"")+" "+(""===o&&0===i.length?"empty":""),style:l,onClick:function(){e.emailInputRef.current&&e.emailInputRef.current.focus()}},f?a.createElement("span",{"data-placeholder":!0},f):null,i.map((function(t,n){return s(t,n,e.removeEmail)})),a.createElement("input",{ref:this.emailInputRef,type:"text",value:o,onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,onChange:this.handleOnChange,onKeyDown:this.handleOnKeydown,onKeyUp:this.handleOnKeyup}))},t}(a.Component);t.default=l},2022:function(e,t,n){"use strict";var i=n(2281);t.Jh=i.default;var o=n(4273);t.Qg=o.default},2281:function(e,t){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i={requireTld:!0,allowUnderscores:!1,allowTrailingDot:!1},o={allowDisplayName:!1,requireDisplayName:!1,allowUtf8LocalPart:!0,requireTld:!0},a=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,r=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,l=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,s=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,c=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;function u(e,t){var n,i=0,o=encodeURI(e).split(/%..|./).length-1;return t&&(i=Number(t.min)||0,n=Number(t.max)),o>=i&&(void 0===n||o<=n)}t.default=function(e,t){if((t=n({},o,t)).requireDisplayName||t.allowDisplayName){var d=e.match(a);if(d)e=d[1];else if(t.requireDisplayName)return!1}var f=e.split("@"),m=""+f.pop(),p=m.toLowerCase(),v=f.join("@");if("gmail.com"!==p&&"googlemail.com"!==p||(v=v.replace(/\./g,"").toLowerCase()),!u(v,{max:64})||!u(m,{max:254}))return!1;if(!function(e,t){(t=n({},i,t)).allowTrailingDot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var o=e.split(".");if(t.requireTld){var a=""+o.pop();if(!o.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(a))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(a))return!1}for(var r=void 0,l=0;l<o.length;l++){if(r=o[l],t.allowUnderscores&&(r=r.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(r))return!1;if(/[\uff01-\uff5e]/.test(r))return!1;if("-"===r[0]||"-"===r[r.length-1])return!1}return!0}(m,{requireTld:t.requireTld}))return!1;if('"'===v[0])return v=v.slice(1,v.length-1),t.allowUtf8LocalPart?c.test(v):l.test(v);for(var g=t.allowUtf8LocalPart?s:r,h=v.split("."),y=0;y<h.length;y++)if(!g.test(h[y]))return!1;return!0}},9196:function(e){"use strict";e.exports=window.React},1850:function(e){"use strict";e.exports=window.ReactDOM}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};!function(){"use strict";n.r(i),n.d(i,{PanelRender:function(){return Y}});var e={};n.r(e),n.d(e,{addNewNotification:function(){return g},deleteNotification:function(){return h},setNotificationProperties:function(){return v},setupStore:function(){return p}});var t={};n.r(t),n.d(t,{getNotificationProperties:function(){return E},getNotifications:function(){return y}});var o={};n.r(o),n.d(o,{getNotifications:function(){return w}});var a=window.wp.data,r=window.lodash;const l="SETUP_STORE",s="SET_NOTIFICATION_PROPERTIES",c="ADD_NEW_NOTIFICATION",u="DELETE_NOTIFICATION",d={notifications:[]};function f(e,t){return e===t?{...e}:t}const m=()=>Math.random().toString(36).substr(2,9);function p(e){return{type:l,payload:{initialPayload:e}}}const v=(e,t)=>({type:s,payload:{properties:t,id:e}}),g=e=>({type:c,payload:{properties:e}}),h=e=>({type:u,payload:{id:e}});function y(e){return e.notifications}function E(e,t){const n=e.notifications.findIndex((e=>e.id===t));return-1===n?null:e.notifications[n].properties}var b=window.qf.config,C=n.n(b);const w=()=>p(C().getInitialPayload().notifications);(0,a.registerStore)("quillForms/notifications-editor",{reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:{const{initialPayload:n}=t.payload;return{...e,notifications:n}}case s:{const{properties:n,id:i}=t.payload,o=e.notifications.findIndex((e=>e.id===i));if(-1===o)return e;const a=(0,r.reduce)(n,((t,n,i)=>(n!==t[i]&&((t=f([...e.notifications][o].properties,t))[i]=n),t)),e.notifications[o].properties);if(a===e.notifications[o].properties)return e;const l=[...e.notifications];return l[o].properties={...a},{...e,notifications:l}}case c:{const{properties:n}=t.payload,i=m(),o=[...e.notifications];return o.push({properties:n,id:i}),{...e,notifications:o}}case u:{const{id:n}=t.payload,i=e.notifications.findIndex((e=>e.id===n));if(-1===i)return e;const o=[...e.notifications];return o.splice(i,1),{notifications:o}}}return e},actions:e,resolvers:o,selectors:t});var F=window.qf.builderPanels,x=window.wp.element,N=n(9196),_=window.qf.adminComponents,k=n(4184),T=n.n(k),O=e=>{let{children:t,type:n}=e;return(0,x.createElement)("div",{className:T()("notifications-editor-alert-message-wrapper",`has-${n}`)},t)},S=e=>{let{isRequired:t,value:n,setValue:i,emailFields:o,label:r}=e;n&&n.match(/{{field:([a-zA-Z0-9-_]+)}}/g)||(n=""),n=n.replace("{{field:",""),n=n.replace("}}","");const{emailBlockType:l}=(0,a.useSelect)((e=>({emailBlockType:e("quillForms/blocks").getBlockType("email")})));(0,N.useEffect)((()=>{o&&0!==o.length?-1===o.findIndex((e=>e.id===n))&&i(o[0].id):i("")}),[JSON.stringify(o)]);const s=null==o?void 0:o.map((e=>({key:e.id,name:(0,x.createElement)("div",{className:"notifications-editor-email-select__option"},(0,x.createElement)(_.BlockIconBox,{icon:null==l?void 0:l.icon,color:null==l?void 0:l.color}),(0,x.createElement)("span",{className:"notifications-editor-email-select__option-title"},(0,_.getPlainExcerpt)(e.attributes.label)))})));return(0,x.createElement)(_.ControlWrapper,{orientation:"vertical"},!!r&&(0,x.createElement)(_.ControlLabel,{label:r}),0===o.length?(0,x.createElement)(O,{type:t?"error":""},"To select an email, you should have at least one email question"):(0,x.createElement)(_.SelectControl,{className:"notifications-editor-email-select",placeholder:"Choose Email",value:s.find((e=>e.key===n)),onChange:e=>{let{selectedItem:t}=e;return i(t.key)},options:s}))},I=window.wp.hooks,P=window.emotion,B=e=>{let{isReviewing:t,isValid:n,setIsValid:i,value:o,setValue:r}=e;(0,N.useEffect)((()=>{o&&o.length>0?i(!0):i(!1)}),[o]);const{fields:l}=(0,a.useSelect)((e=>{const t=e("quillForms/blocks").getBlockTypes();return{fields:e("quillForms/block-editor").getAllBlocks().filter((e=>{var n;const i=t[e.name];return!0===(null==i||null===(n=i.supports)||void 0===n?void 0:n.editable)})).map((n=>{var i,o;return{type:"field",modifier:n.id,label:(0,_.getPlainExcerpt)(n.attributes.label),icon:null===(i=t[n.name])||void 0===i?void 0:i.icon,color:null===(o=t[n.name])||void 0===o?void 0:o.color,order:e("quillForms/block-editor").getBlockOrderById(n.id)}}))}}));let s=[{type:"form",modifier:"all_answers",label:"all_answers"}].concat(l);return s=s.concat((0,I.applyFilters)("QuillForms.Builder.MergeTags",[])),(0,x.createElement)(_.BaseControl,null,(0,x.createElement)(_.ControlWrapper,{orientation:"vertical"},(0,x.createElement)(_.ControlLabel,{label:"Message",showAsterisk:!0}),(0,x.createElement)(_.RichTextControl,{className:P.css`
						min-height: 120px !important;
					`,mergeTags:s,value:o,setValue:e=>{r(e)},allowedFormats:["bold","italic","link"]})),!n&&t&&(0,x.createElement)(O,{type:"error"},"This field is required!"))},D=e=>{let{value:t,setValue:n,isValid:i,setIsValid:o,isReviewing:a}=e;return(0,N.useEffect)((()=>{t&&t.length>0?o(!0):o(!1)}),[t]),(0,x.createElement)(_.BaseControl,null,(0,x.createElement)(_.ControlWrapper,{orientation:"vertical"},(0,x.createElement)(_.ControlLabel,{label:"Subject",showAsterisk:!0}),(0,x.createElement)(_.TextControl,{value:t,onChange:e=>n(e)}),!i&&a&&(0,x.createElement)(O,{type:"error"},"This field is required!")))},A=n(1850),R=window.wp.components,q=window.wp.primitives,V=(0,x.createElement)(q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,x.createElement)(q.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})),j=e=>{let{goBack:t,notificationId:n,properties:i,validationFlags:o,isReviewing:r,setIsReviewing:l}=e;const{setNotificationProperties:s,addNewNotification:c}=(0,a.useDispatch)("quillForms/notifications-editor"),u=Object.keys(o).filter((e=>!1===o[e])).length>0;return(0,A.createPortal)((0,x.createElement)("div",{className:"notifications-editor-notification-edit__footer"},(0,x.createElement)(_.Button,{isDefault:!0,onClick:()=>{t()}},(0,x.createElement)(R.Icon,{icon:V,className:P.css`
						margin-right: 5px;
					`}),"Cancel and go back"),r&&u?(0,x.createElement)(_.Button,{isDanger:!0},"Some fields aren't valid"," "):(0,x.createElement)(_.Button,{isPrimary:!0,onClick:()=>{u?l(!0):(n?s(n,i):c(i),t())}},n?"Save changes":"Add new notification")),document.querySelector(".builder-core-panel"))},L=e=>{let{value:t,setValue:n}=e;return(0,x.createElement)("div",{className:"notifications-editor-notification-title"},(0,x.createElement)(_.BaseControl,null,(0,x.createElement)(_.ControlWrapper,null,(0,x.createElement)(_.ControlLabel,{label:"Title"}),(0,x.createElement)(_.TextControl,{value:t,onChange:e=>{n({title:e})}}))))},U=n(2022),M=e=>{let{recipients:t,toType:n,setValue:i,isValid:o,setIsValid:a,emailFields:l,isReviewing:s}=e;(0,N.useEffect)((()=>{t&&0!==t.length?a(!0):a(!1)}),[t]);const c=[{key:"email",name:"Email"},{key:"field",name:"Field"}];return(0,x.createElement)(_.BaseControl,null,(0,x.createElement)(_.ControlWrapper,{orientation:"horizontal"},(0,x.createElement)(_.ControlLabel,{label:"Send a notification to",showAsterisk:!0}),(0,x.createElement)("div",{className:T()("notification-editor-toType-select","select-control-wrapper",P.css`
							width: 187px;
						`)},(0,x.createElement)(_.SelectControl,{className:P.css`
							margin-top: 0 !important;
						`,value:c.find((e=>e.key===n)),onChange:e=>{let{selectedItem:t}=e;i({toType:t.key,recipients:[]})},options:c}))),"email"===n&&(0,x.createElement)(U.Qg,{placeholder:"Type an email then hit a space",emails:(null==t?void 0:t.length)>0?t.filter((e=>(0,U.Jh)(e))):[],onChange:e=>{const t=e.filter((e=>(0,U.Jh)(e)));i({recipients:(0,r.uniq)(t)})},validateEmail:e=>(0,U.Jh)(e),getLabel:(e,t,n)=>(0,x.createElement)("div",{"data-tag":!0,key:t},e,(0,x.createElement)("span",{"data-tag-handle":!0,onClick:()=>n(t)},"Ã—"))}),"field"===n&&(0,x.createElement)(S,{isRequired:!0,emailFields:l,value:t&&t[0]&&t[0].length>0?t[0]:"",setValue:e=>{e&&l.some((t=>t.id===e))?i({recipients:[`{{field:${e}}}`]}):i({recipients:[]})}}),!o&&s&&("email"===n||"field"===n&&l.length>0)&&(0,x.createElement)(O,{type:"error"},"Please insert at least one correct email!"))},z=e=>{let{goBack:t,currentNotificationProperties:n,notificationId:i,activeSlide:o,isActive:l,isAnimating:s}=e;const[c,u]=(0,N.useState)({...n}),[d,f]=(0,N.useState)(!1),[m,p]=(0,N.useState)(!1),[v,g]=(0,N.useState)((0,r.zipObject)((0,r.keys)({...c}),(0,r.keys)({...c}).map((()=>!0))));(0,N.useEffect)((()=>{n&&u({...n}),p(!1),f(1===o)}),[o]);const{active:h,title:y,toType:E,recipients:b,replyTo:C,subject:w,message:F,conditions:k}=c,{emailFields:O}=(0,a.useSelect)((e=>({emailFields:e("quillForms/block-editor").getAllBlocks().filter((e=>"email"===e.name))})));return(0,x.createElement)("div",{className:T()("notifications-editor-notification-editor-wrapper",{active:l,"is-animating":s})},(0,x.createElement)(x.Fragment,null,(0,x.createElement)("h4",{className:"notifications-editor-notification-editor-wrapper__heading"},i?"Edit Notification":"Create a new notification"),(0,x.createElement)(L,{value:y,setValue:e=>{u((t=>({...t,...e})))}}),(0,x.createElement)(_.BaseControl,null,(0,x.createElement)(_.ControlWrapper,null,(0,x.createElement)(_.ControlLabel,{label:"Active"}),(0,x.createElement)(_.ToggleControl,{checked:h,onChange:()=>{u((e=>({...e,active:!h})))}}))),(0,x.createElement)(M,{emailFields:O,recipients:b,toType:E,isValid:{...v}.recipients,setIsValid:e=>{g((t=>({...t,recipients:e})))},setValue:e=>{u((t=>({...t,...e})))},isReviewing:m}),(0,x.createElement)(_.BaseControl,null,(0,x.createElement)(S,{label:"Reply to",emailFields:O,value:C,setValue:e=>u((t=>({...t,replyTo:`{{field:${e}}}`})))})),(0,x.createElement)(D,{value:w,setValue:e=>{u((t=>({...t,subject:e})))},isValid:{...v}.subject,setIsValid:e=>{g((t=>({...t,subject:e})))},isReviewing:m}),d&&(0,x.createElement)(B,{value:F,setValue:e=>{u((t=>({...t,message:e})))},isValid:{...v}.message,setIsValid:e=>{g((t=>({...t,message:e})))},isReviewing:m}),(0,x.createElement)(_.BaseControl,null,(0,x.createElement)(_.ControlWrapper,null,(0,x.createElement)(_.ControlLabel,{label:"Conditional Logic"}),(0,x.createElement)(_.ToggleControl,{checked:!!k,onChange:()=>{u((e=>({...e,conditions:k?void 0:[]})))}})),!!k&&(0,x.createElement)("div",null,(0,x.createElement)("div",null,"Process this notification if the following conditions are met:"),(0,x.createElement)(_.LogicConditions,{value:k,onChange:e=>u((t=>({...t,conditions:e})))}))),l&&(0,x.createElement)(j,{isReviewing:m,setIsReviewing:p,goBack:t,notificationId:i,properties:{...c},validationFlags:{...v}})))},$=function(e){let{icon:t,size:n=24,...i}=e;return(0,x.cloneElement)(t,{width:n,height:n,...i})},W=(0,x.createElement)(q.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,x.createElement)(q.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})),K=n(28),J=e=>{let{proceed:t,closeModal:n}=e;return(0,x.createElement)(R.Modal,{className:T()("qf-notification-delete-dialog",P.css`
					border: none !important;
				`),title:"Delete notification",onRequestClose:n},(0,x.createElement)("div",{className:"notifications-delete-dialog__body"},"Are you sure you would like to delete this notification?"),(0,x.createElement)("div",{className:"notifications-delete-dialog__actions"},(0,x.createElement)(_.Button,{isDefault:!0,onClick:n},"Cancel"),(0,x.createElement)(_.Button,{isDanger:!0,onClick:t},"Delete")))},H=e=>{let{notification:t,onEdit:n,index:i}=e;const[o,r]=(0,N.useState)(!1);(0,N.useEffect)((()=>{setTimeout((()=>{r(!0)}),50)}),[]);const{properties:{title:l,active:s},id:c}=t,{setNotificationProperties:u,deleteNotification:d}=(0,a.useDispatch)("quillForms/notifications-editor");return(0,x.createElement)("div",{className:T()("notifications-editor-notification-box",P.css`
					opacity: 0;
					transform: scale( 0.6 );
					transition: all 0.3s ease;
					transition-delay: ${.05*i}s;

					&.mounted {
						opacity: 1;
						transform: scale( 1 );
					}
				`,{mounted:o})},(0,x.createElement)("div",{className:"notifications-editor-notification-box__title"},(0,x.createElement)("div",{className:"notifications-editor-notification-box__status"},(0,x.createElement)(_.ToggleControl,{checked:s,onChange:()=>{u(c,{active:!s})}})),l||"Untitled"),(0,x.createElement)("div",{className:"notifications-editor-notification-box__actions"},(0,x.createElement)("div",{role:"presentation",className:"notifications-editor-notification-box__actions-edit",onClick:()=>{n()}},"Edit"),(0,x.createElement)("div",{role:"presentation",className:"notifications-editor-notification-box__actions-delete",onClick:()=>{(0,K._1)({customUI:e=>{let{onClose:t}=e;return(0,x.createElement)(J,{closeModal:()=>{t()},proceed:()=>{d(c),t()}})}})}},"Delete")))},G=e=>{let{goNext:t,setCurrentNotificationId:n,isActive:i,isAnimating:o}=e;const[r,l]=(0,N.useState)(!1),s=C().getLicense(),{notifications:c}=(0,a.useSelect)((e=>({notifications:e("quillForms/notifications-editor").getNotifications()})));return(0,x.createElement)("div",{className:T()("notifications-editor-notifciations-list",{active:i,"is-animating":o})},(0,x.createElement)("div",{className:"notifications-editor-notifciations-list__header"},(0,x.createElement)("h4",{className:P.css`
						font-size: 15px;
					`},"Notifications List"),(0,x.createElement)(_.Button,{className:P.css`
						border-radius: 8px !important;
						display: inlinep-flex;
						align-items: center;
					`,isPrimary:!0,onClick:()=>{c.length>0&&"valid"!==(null==s?void 0:s.status)?l(!0):(n(null),t())},isLarge:!0},"Add New Notification",(0,x.createElement)($,{className:P.css`
							fill: #fff;
							margin-left: 5px;
						`,icon:W,size:15}))),(0,x.createElement)(x.Fragment,null,(null==c?void 0:c.length)>0?c.map(((e,i)=>(0,x.createElement)(H,{index:i,onEdit:()=>{n(e.id),t()},key:e.id,notification:e}))):(0,x.createElement)("div",{className:"notifications-editor-no-notifications-msg"},"There are no notifications.")),(0,x.createElement)(x.Fragment,null,r&&(0,x.createElement)(R.Modal,{className:T()(P.css`
								border: none !important;
								border-radius: 9px;

								.components-modal__header {
									background: linear-gradient(
										42deg,
										rgb( 235 54 221 ),
										rgb( 238 142 22 )
									);
									h1 {
										color: #fff;
									}
									svg {
										fill: #fff;
									}
								}
								.components-modal__content {
									text-align: center;
								}
							`),title:"Multiple notifications is a pro feature",onRequestClose:()=>{l(!1)}},(0,x.createElement)(_.__experimentalFeatureAvailability,{featureName:"Multiple notifications",planKey:"basic",showLockIcon:!0}))))};let Q;var Y=()=>{const[e,t]=(0,N.useState)(0),[n,i]=(0,N.useState)(!1),o=(0,N.useRef)();(0,N.useEffect)((()=>{null!=o&&o.current&&setTimeout((()=>{null!=o&&o.current&&o.current.scrollTo(0,0)}),0)}),[e]),(0,N.useEffect)((()=>(n&&(Q=setTimeout((()=>{i(!1)}),600)),()=>clearTimeout(Q))),[n,e]);const[r,l]=(0,N.useState)(null),{currentNotificationProperties:s}=(0,a.useSelect)((e=>r?{currentNotificationProperties:e("quillForms/notifications-editor").getNotificationProperties(r)}:{currentNotificationProperties:{title:"",toType:"email",active:!0,recipients:[],replyTo:"",subject:"",message:"{{form:all_answers}}"}}));return(0,x.createElement)("div",{className:`notifications-editor-panel-render active-slide-${e}`,ref:o},(0,x.createElement)(G,{isAnimating:n,isActive:0===e,setCurrentNotificationId:l,goNext:()=>{i(!0),setTimeout((()=>{t(1)}),50)}}),(0,x.createElement)(z,{isAnimating:n,isActive:1===e,activeSlide:e,notificationId:r,currentNotificationProperties:{...s},goBack:()=>{i(!0),setTimeout((()=>{t(0)}),50)}}))};(0,F.registerBuilderPanel)("notifications",{title:"Email Notifications",icon:()=>(0,x.createElement)("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true"},(0,x.createElement)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})),mode:"single",areaToShow:"drop-area",render:Y,position:3})}(),(window.qf=window.qf||{}).notificationsEditor=i}();